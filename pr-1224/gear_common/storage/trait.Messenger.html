<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Represents messenger’s logic of centralized message processing behavior."><meta name="keywords" content="rust, rustlang, rust-lang, Messenger"><title>Messenger in gear_common::storage - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../gear_common/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../gear_common/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Messenger</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#required-associated-types">Required Associated Types</a></h3><ul><li><a href="#associatedtype.BlockNumber">BlockNumber</a></li><li><a href="#associatedtype.Capacity">Capacity</a></li><li><a href="#associatedtype.Dequeued">Dequeued</a></li><li><a href="#associatedtype.Error">Error</a></li><li><a href="#associatedtype.Mailbox">Mailbox</a></li><li><a href="#associatedtype.MailboxFirstKey">MailboxFirstKey</a></li><li><a href="#associatedtype.MailboxSecondKey">MailboxSecondKey</a></li><li><a href="#associatedtype.MailboxedMessage">MailboxedMessage</a></li><li><a href="#associatedtype.OutputError">OutputError</a></li><li><a href="#associatedtype.Queue">Queue</a></li><li><a href="#associatedtype.QueueProcessing">QueueProcessing</a></li><li><a href="#associatedtype.QueuedDispatch">QueuedDispatch</a></li><li><a href="#associatedtype.Sent">Sent</a></li><li><a href="#associatedtype.Waitlist">Waitlist</a></li><li><a href="#associatedtype.WaitlistFirstKey">WaitlistFirstKey</a></li><li><a href="#associatedtype.WaitlistSecondKey">WaitlistSecondKey</a></li><li><a href="#associatedtype.WaitlistedMessage">WaitlistedMessage</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#provided-methods">Provided Methods</a></h3><ul><li><a href="#method.reset">reset</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div></section><h2 class="location"><a href="index.html">In gear_common::storage</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../gear_common/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1">
                                <a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div>
                        </div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Trait <a href="../index.html">gear_common</a>::<wbr><a href="index.html">storage</a>::<wbr><a class="trait" href="#">Messenger</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#30-175">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait Messenger {
<details class="rustdoc-toggle type-contents-toggle"><summary class="hideme"><span>Show 18 associated items</span></summary>    type <a href="#associatedtype.BlockNumber" class="associatedtype">BlockNumber</a>;
    type <a href="#associatedtype.Capacity" class="associatedtype">Capacity</a>;
    type <a href="#associatedtype.Error" class="associatedtype">Error</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> + <a class="trait" href="trait.DequeueError.html" title="trait gear_common::storage::DequeueError">DequeueError</a> + <a class="trait" href="trait.MailboxError.html" title="trait gear_common::storage::MailboxError">MailboxError</a> + <a class="trait" href="trait.WaitlistError.html" title="trait gear_common::storage::WaitlistError">WaitlistError</a>;
    type <a href="#associatedtype.OutputError" class="associatedtype">OutputError</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Error" title="type gear_common::storage::Messenger::Error">Error</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>;
    type <a href="#associatedtype.MailboxFirstKey" class="associatedtype">MailboxFirstKey</a>;
    type <a href="#associatedtype.MailboxSecondKey" class="associatedtype">MailboxSecondKey</a>;
    type <a href="#associatedtype.MailboxedMessage" class="associatedtype">MailboxedMessage</a>;
    type <a href="#associatedtype.QueuedDispatch" class="associatedtype">QueuedDispatch</a>;
    type <a href="#associatedtype.WaitlistFirstKey" class="associatedtype">WaitlistFirstKey</a>;
    type <a href="#associatedtype.WaitlistSecondKey" class="associatedtype">WaitlistSecondKey</a>;
    type <a href="#associatedtype.WaitlistedMessage" class="associatedtype">WaitlistedMessage</a>;
    type <a href="#associatedtype.Sent" class="associatedtype">Sent</a>: <a class="trait" href="trait.Counter.html" title="trait gear_common::storage::Counter">Counter</a>&lt;Value = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Capacity" title="type gear_common::storage::Messenger::Capacity">Capacity</a>&gt;;
    type <a href="#associatedtype.Dequeued" class="associatedtype">Dequeued</a>: <a class="trait" href="trait.Counter.html" title="trait gear_common::storage::Counter">Counter</a>&lt;Value = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Capacity" title="type gear_common::storage::Messenger::Capacity">Capacity</a>&gt;;
    type <a href="#associatedtype.QueueProcessing" class="associatedtype">QueueProcessing</a>: <a class="trait" href="trait.Toggler.html" title="trait gear_common::storage::Toggler">Toggler</a>;
    type <a href="#associatedtype.Queue" class="associatedtype">Queue</a>: <a class="trait" href="trait.Queue.html" title="trait gear_common::storage::Queue">Queue</a>&lt;Value = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.QueuedDispatch" title="type gear_common::storage::Messenger::QueuedDispatch">QueuedDispatch</a>, Error = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Error" title="type gear_common::storage::Messenger::Error">Error</a>, OutputError = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.OutputError" title="type gear_common::storage::Messenger::OutputError">OutputError</a>&gt; + <a class="trait" href="trait.Counted.html" title="trait gear_common::storage::Counted">Counted</a>&lt;Length = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Capacity" title="type gear_common::storage::Messenger::Capacity">Capacity</a>&gt; + <a class="trait" href="trait.IterableMap.html" title="trait gear_common::storage::IterableMap">IterableMap</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.QueuedDispatch" title="type gear_common::storage::Messenger::QueuedDispatch">QueuedDispatch</a>, Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.OutputError" title="type gear_common::storage::Messenger::OutputError">OutputError</a>&gt;&gt;;
    type <a href="#associatedtype.Mailbox" class="associatedtype">Mailbox</a>: <a class="trait" href="trait.Mailbox.html" title="trait gear_common::storage::Mailbox">Mailbox</a>&lt;Key1 = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxFirstKey" title="type gear_common::storage::Messenger::MailboxFirstKey">MailboxFirstKey</a>, Key2 = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxSecondKey" title="type gear_common::storage::Messenger::MailboxSecondKey">MailboxSecondKey</a>, Value = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxedMessage" title="type gear_common::storage::Messenger::MailboxedMessage">MailboxedMessage</a>, BlockNumber = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.BlockNumber" title="type gear_common::storage::Messenger::BlockNumber">BlockNumber</a>, Error = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Error" title="type gear_common::storage::Messenger::Error">Error</a>, OutputError = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.OutputError" title="type gear_common::storage::Messenger::OutputError">OutputError</a>&gt; + <a class="trait" href="trait.CountedByKey.html" title="trait gear_common::storage::CountedByKey">CountedByKey</a>&lt;Key = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxFirstKey" title="type gear_common::storage::Messenger::MailboxFirstKey">MailboxFirstKey</a>, Length = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt; + <a class="trait" href="trait.IterableByKeyMap.html" title="trait gear_common::storage::IterableByKeyMap">IterableByKeyMap</a>&lt;(Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxedMessage" title="type gear_common::storage::Messenger::MailboxedMessage">MailboxedMessage</a>, <a class="struct" href="struct.Interval.html" title="struct gear_common::storage::Interval">Interval</a>&lt;Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.BlockNumber" title="type gear_common::storage::Messenger::BlockNumber">BlockNumber</a>&gt;), Key = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxFirstKey" title="type gear_common::storage::Messenger::MailboxFirstKey">MailboxFirstKey</a>&gt;;
    type <a href="#associatedtype.Waitlist" class="associatedtype">Waitlist</a>: <a class="trait" href="trait.Waitlist.html" title="trait gear_common::storage::Waitlist">Waitlist</a>&lt;Key1 = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistFirstKey" title="type gear_common::storage::Messenger::WaitlistFirstKey">WaitlistFirstKey</a>, Key2 = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistSecondKey" title="type gear_common::storage::Messenger::WaitlistSecondKey">WaitlistSecondKey</a>, Value = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistedMessage" title="type gear_common::storage::Messenger::WaitlistedMessage">WaitlistedMessage</a>, BlockNumber = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.BlockNumber" title="type gear_common::storage::Messenger::BlockNumber">BlockNumber</a>, Error = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Error" title="type gear_common::storage::Messenger::Error">Error</a>, OutputError = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.OutputError" title="type gear_common::storage::Messenger::OutputError">OutputError</a>&gt; + <a class="trait" href="trait.CountedByKey.html" title="trait gear_common::storage::CountedByKey">CountedByKey</a>&lt;Key = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistFirstKey" title="type gear_common::storage::Messenger::WaitlistFirstKey">WaitlistFirstKey</a>, Length = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt; + <a class="trait" href="trait.IterableMap.html" title="trait gear_common::storage::IterableMap">IterableMap</a>&lt;(Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistedMessage" title="type gear_common::storage::Messenger::WaitlistedMessage">WaitlistedMessage</a>, <a class="struct" href="struct.Interval.html" title="struct gear_common::storage::Interval">Interval</a>&lt;Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.BlockNumber" title="type gear_common::storage::Messenger::BlockNumber">BlockNumber</a>&gt;)&gt; + <a class="trait" href="trait.IterableByKeyMap.html" title="trait gear_common::storage::IterableByKeyMap">IterableByKeyMap</a>&lt;(Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistedMessage" title="type gear_common::storage::Messenger::WaitlistedMessage">WaitlistedMessage</a>, <a class="struct" href="struct.Interval.html" title="struct gear_common::storage::Interval">Interval</a>&lt;Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.BlockNumber" title="type gear_common::storage::Messenger::BlockNumber">BlockNumber</a>&gt;), Key = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistFirstKey" title="type gear_common::storage::Messenger::WaitlistFirstKey">WaitlistFirstKey</a>&gt;;

    fn <a href="#method.reset" class="fnname">reset</a>() { ... }
</details>}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Represents messenger’s logic of centralized message processing behavior.</p>
</div></details><h2 id="required-associated-types" class="small-section-header">Required Associated Types<a href="#required-associated-types" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="associatedtype.BlockNumber" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#32">source</a></div><h4 class="code-header">type <a href="#associatedtype.BlockNumber" class="associatedtype">BlockNumber</a></h4></div></summary><div class="docblock"><p>Block number type of the messenger.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.Capacity" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#37">source</a></div><h4 class="code-header">type <a href="#associatedtype.Capacity" class="associatedtype">Capacity</a></h4></div></summary><div class="docblock"><p>Capacity of the messenger.</p>
<p>This type defines length type of the queue, sent and
dequeued messages within same block amount type.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.Error" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#39">source</a></div><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> + <a class="trait" href="trait.DequeueError.html" title="trait gear_common::storage::DequeueError">DequeueError</a> + <a class="trait" href="trait.MailboxError.html" title="trait gear_common::storage::MailboxError">MailboxError</a> + <a class="trait" href="trait.WaitlistError.html" title="trait gear_common::storage::WaitlistError">WaitlistError</a></h4></div></summary><div class="docblock"><p>Inner error type generated by gear’s storage types.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.OutputError" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#44">source</a></div><h4 class="code-header">type <a href="#associatedtype.OutputError" class="associatedtype">OutputError</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Error" title="type gear_common::storage::Messenger::Error">Error</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a></h4></div></summary><div class="docblock"><p>Output error of each storage algorithm.</p>
<p>Implements <code>From&lt;Self::Error&gt;</code> to be able to return
any required error type.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.MailboxFirstKey" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#49">source</a></div><h4 class="code-header">type <a href="#associatedtype.MailboxFirstKey" class="associatedtype">MailboxFirstKey</a></h4></div></summary><div class="docblock"><p>First key of the mailbox storage.</p>
<p>Present to clarify compiler behavior over associated types.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.MailboxSecondKey" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#53">source</a></div><h4 class="code-header">type <a href="#associatedtype.MailboxSecondKey" class="associatedtype">MailboxSecondKey</a></h4></div></summary><div class="docblock"><p>Second key of the mailbox storage.</p>
<p>Present to clarify compiler behavior over associated types.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.MailboxedMessage" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#57">source</a></div><h4 class="code-header">type <a href="#associatedtype.MailboxedMessage" class="associatedtype">MailboxedMessage</a></h4></div></summary><div class="docblock"><p>Stored values type for <code>Self::Mailbox</code>.</p>
<p>Present to clarify compiler behavior over associated types.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.QueuedDispatch" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#61">source</a></div><h4 class="code-header">type <a href="#associatedtype.QueuedDispatch" class="associatedtype">QueuedDispatch</a></h4></div></summary><div class="docblock"><p>Stored values type for <code>Self::Queue</code>.</p>
<p>Present to clarify compiler behavior over associated types.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.WaitlistFirstKey" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#65">source</a></div><h4 class="code-header">type <a href="#associatedtype.WaitlistFirstKey" class="associatedtype">WaitlistFirstKey</a></h4></div></summary><div class="docblock"><p>First key of the waitlist storage.</p>
<p>Present to clarify compiler behavior over associated types.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.WaitlistSecondKey" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#69">source</a></div><h4 class="code-header">type <a href="#associatedtype.WaitlistSecondKey" class="associatedtype">WaitlistSecondKey</a></h4></div></summary><div class="docblock"><p>Second key of the waitlist storage.</p>
<p>Present to clarify compiler behavior over associated types.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.WaitlistedMessage" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#73">source</a></div><h4 class="code-header">type <a href="#associatedtype.WaitlistedMessage" class="associatedtype">WaitlistedMessage</a></h4></div></summary><div class="docblock"><p>Stored values type for <code>Self::Waitlist</code>.</p>
<p>Present to clarify compiler behavior over associated types.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.Sent" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#79">source</a></div><h4 class="code-header">type <a href="#associatedtype.Sent" class="associatedtype">Sent</a>: <a class="trait" href="trait.Counter.html" title="trait gear_common::storage::Counter">Counter</a>&lt;Value = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Capacity" title="type gear_common::storage::Messenger::Capacity">Capacity</a>&gt;</h4></div></summary><div class="docblock"><p>Amount of messages sent from outside (from users)
within the current block.</p>
<p>Used as local counter for <code>MessageId</code> generation.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.Dequeued" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#85">source</a></div><h4 class="code-header">type <a href="#associatedtype.Dequeued" class="associatedtype">Dequeued</a>: <a class="trait" href="trait.Counter.html" title="trait gear_common::storage::Counter">Counter</a>&lt;Value = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Capacity" title="type gear_common::storage::Messenger::Capacity">Capacity</a>&gt;</h4></div></summary><div class="docblock"><p>Amount of messages dequeued with the current block.</p>
<p>Used for depositing informational event about how much messages
were took from queue in <code>process_queue</code> execution.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.QueueProcessing" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#93">source</a></div><h4 class="code-header">type <a href="#associatedtype.QueueProcessing" class="associatedtype">QueueProcessing</a>: <a class="trait" href="trait.Toggler.html" title="trait gear_common::storage::Toggler">Toggler</a></h4></div></summary><div class="docblock"><p>Allowance of queue processing.</p>
<p>Used for checking could <code>process_queue</code> continue it’s execution.
Execution finishes, once message requeued at the end of the queue,
because it alerts, that this execution exceed gas allowance of the
current block by gear’s processing algorithm.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.Queue" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#100-102">source</a></div><h4 class="code-header">type <a href="#associatedtype.Queue" class="associatedtype">Queue</a>: <a class="trait" href="trait.Queue.html" title="trait gear_common::storage::Queue">Queue</a>&lt;Value = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.QueuedDispatch" title="type gear_common::storage::Messenger::QueuedDispatch">QueuedDispatch</a>, Error = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Error" title="type gear_common::storage::Messenger::Error">Error</a>, OutputError = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.OutputError" title="type gear_common::storage::Messenger::OutputError">OutputError</a>&gt; + <a class="trait" href="trait.Counted.html" title="trait gear_common::storage::Counted">Counted</a>&lt;Length = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Capacity" title="type gear_common::storage::Messenger::Capacity">Capacity</a>&gt; + <a class="trait" href="trait.IterableMap.html" title="trait gear_common::storage::IterableMap">IterableMap</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.QueuedDispatch" title="type gear_common::storage::Messenger::QueuedDispatch">QueuedDispatch</a>, Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.OutputError" title="type gear_common::storage::Messenger::OutputError">OutputError</a>&gt;&gt;</h4></div></summary><div class="docblock"><p>Gear message queue.</p>
<p>Message queue contains only messages addressed to programs.
Messages from queue process on idle of each block in <code>process_queue</code>,
function, except case of runtime upgrade - then processing skipped.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.Mailbox" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#112-123">source</a></div><h4 class="code-header">type <a href="#associatedtype.Mailbox" class="associatedtype">Mailbox</a>: <a class="trait" href="trait.Mailbox.html" title="trait gear_common::storage::Mailbox">Mailbox</a>&lt;Key1 = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxFirstKey" title="type gear_common::storage::Messenger::MailboxFirstKey">MailboxFirstKey</a>, Key2 = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxSecondKey" title="type gear_common::storage::Messenger::MailboxSecondKey">MailboxSecondKey</a>, Value = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxedMessage" title="type gear_common::storage::Messenger::MailboxedMessage">MailboxedMessage</a>, BlockNumber = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.BlockNumber" title="type gear_common::storage::Messenger::BlockNumber">BlockNumber</a>, Error = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Error" title="type gear_common::storage::Messenger::Error">Error</a>, OutputError = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.OutputError" title="type gear_common::storage::Messenger::OutputError">OutputError</a>&gt; + <a class="trait" href="trait.CountedByKey.html" title="trait gear_common::storage::CountedByKey">CountedByKey</a>&lt;Key = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxFirstKey" title="type gear_common::storage::Messenger::MailboxFirstKey">MailboxFirstKey</a>, Length = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt; + <a class="trait" href="trait.IterableByKeyMap.html" title="trait gear_common::storage::IterableByKeyMap">IterableByKeyMap</a>&lt;(Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxedMessage" title="type gear_common::storage::Messenger::MailboxedMessage">MailboxedMessage</a>, <a class="struct" href="struct.Interval.html" title="struct gear_common::storage::Interval">Interval</a>&lt;Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.BlockNumber" title="type gear_common::storage::Messenger::BlockNumber">BlockNumber</a>&gt;), Key = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.MailboxFirstKey" title="type gear_common::storage::Messenger::MailboxFirstKey">MailboxFirstKey</a>&gt;</h4></div></summary><div class="docblock"><p>Gear mailbox.</p>
<p>Mailbox contains only messages addressed to user accounts.
Any address meant as user account if it’s not program id.</p>
<p>Only mailbox owner (user with message’s destination address)
can claim value from the message, removing it afterward, or claim
and send reply on received message, if it still present (#642).</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.Waitlist" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#149-161">source</a></div><h4 class="code-header">type <a href="#associatedtype.Waitlist" class="associatedtype">Waitlist</a>: <a class="trait" href="trait.Waitlist.html" title="trait gear_common::storage::Waitlist">Waitlist</a>&lt;Key1 = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistFirstKey" title="type gear_common::storage::Messenger::WaitlistFirstKey">WaitlistFirstKey</a>, Key2 = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistSecondKey" title="type gear_common::storage::Messenger::WaitlistSecondKey">WaitlistSecondKey</a>, Value = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistedMessage" title="type gear_common::storage::Messenger::WaitlistedMessage">WaitlistedMessage</a>, BlockNumber = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.BlockNumber" title="type gear_common::storage::Messenger::BlockNumber">BlockNumber</a>, Error = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.Error" title="type gear_common::storage::Messenger::Error">Error</a>, OutputError = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.OutputError" title="type gear_common::storage::Messenger::OutputError">OutputError</a>&gt; + <a class="trait" href="trait.CountedByKey.html" title="trait gear_common::storage::CountedByKey">CountedByKey</a>&lt;Key = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistFirstKey" title="type gear_common::storage::Messenger::WaitlistFirstKey">WaitlistFirstKey</a>, Length = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt; + <a class="trait" href="trait.IterableMap.html" title="trait gear_common::storage::IterableMap">IterableMap</a>&lt;(Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistedMessage" title="type gear_common::storage::Messenger::WaitlistedMessage">WaitlistedMessage</a>, <a class="struct" href="struct.Interval.html" title="struct gear_common::storage::Interval">Interval</a>&lt;Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.BlockNumber" title="type gear_common::storage::Messenger::BlockNumber">BlockNumber</a>&gt;)&gt; + <a class="trait" href="trait.IterableByKeyMap.html" title="trait gear_common::storage::IterableByKeyMap">IterableByKeyMap</a>&lt;(Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistedMessage" title="type gear_common::storage::Messenger::WaitlistedMessage">WaitlistedMessage</a>, <a class="struct" href="struct.Interval.html" title="struct gear_common::storage::Interval">Interval</a>&lt;Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.BlockNumber" title="type gear_common::storage::Messenger::BlockNumber">BlockNumber</a>&gt;), Key = Self::<a class="associatedtype" href="trait.Messenger.html#associatedtype.WaitlistFirstKey" title="type gear_common::storage::Messenger::WaitlistFirstKey">WaitlistFirstKey</a>&gt;</h4></div></summary><div class="docblock"><p>Gear waitlist.</p>
<p>Waitlist contains messages, which execution should be
delayed for some logic.</p>
<p>Message can be inserted into waitlist only in these cases:</p>
<ol>
<li>Destination program called <code>gr_wait</code> while was executing
this message, so only this program can remove and
requeue it by <code>gr_wake</code> call in any execution.</li>
<li>The message sent to program, that hadn’t finished its
initialization, and will be automatically removed once
result of initialization would be available.</li>
<li>Restored after resuming paused programs. On pause we
collect waitlist content addressed to the program,
removing it afterwards. On resume, user should provide
the same content to be able to unpause program, which
gonna be added into waitlist again.</li>
</ol>
<p>More cases may be considered in future.</p>
<p>Gear runtime also charges rent for holding in waitlist.
Note, that system can remove message from waitlist,
if it couldn’t pay rent for holding there further.
For details, see <code>pallet-gear-scheduler</code>.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="method.reset" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/gear_common/storage/complex/messenger.rs.html#167-174">source</a></div><h4 class="code-header">fn <a href="#method.reset" class="fnname">reset</a>()</h4></div></summary><div class="docblock"><p>Resets all related to messenger storages.</p>
<p>It’s temporary production solution to avoid DB migrations,
would be available for tests purposes only in future.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"></div><script type="text/javascript" src="../../implementors/gear_common/storage/complex/messenger/trait.Messenger.js" data-ignore-extern-crates="" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="gear_common" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.64.0-nightly (848090dcd 2022-07-22)" ></div>
</body></html>